---
title: "p8105_hw2_cz2657"
output: github_document
---

## Problem 1

Reading and cleaning Mr. Trash Wheel sheet

```{r}
library(tidyverse)
library(readxl)
```


```{r}
trash_df = 
  read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N408", col_names = TRUE) %>% 
  janitor::clean_names() %>% 
  drop_na("dumpster") 

rain2018_df = read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2018 Precipitation", range = "A2:B14", col_names = TRUE) %>% mutate(year = 2018) %>% janitor::clean_names() %>% drop_na(total)

rain2019_df = read_excel("Trash-Wheel-Collection-Totals-8-6-19.xlsx", sheet = "2019 Precipitation", range = "A2:B14", col_names = TRUE) %>% mutate(year = 2019) %>% janitor::clean_names() %>% drop_na(total)

rain_df = full_join(rain2018_df, rain2019_df) %>% 
  mutate(month = month.name[month]) %>% 
  rename(total_precipitation_in = total)

```

The `trash_df` dataset has `r nrow(trash_df)` observations and includes the variables `weight_tons` and `volume_cubic_yards` which describe the amount of garbage consumed by Mr. Trash Wheel. Furthermore, it provides detail around the number of plastic bottles (`plastic_bottles`), cigarette butts (`cigarette_butts`), and grocery bags (`grocery_bags`) consumed by Mr. Trash Wheel. Excitingly, Mr. Trash Wheel powered a maximum of `r max(pull(trash_df, homes_powered), na.rm=TRUE)` using the trash collected for a single dumpster. The median number of `sports_balls` in a dumpster in 2019 was `r median(pull(filter(trash_df, year == 2019),sports_balls))`. 

The `rain_df`dataset has `r nrow(rain_df)` observations and includes the variables `r colnames(rain_df)`. Total precipitation in 2018 was `r sum(pull(filter(rain_df, year == 2018), total_precipitation_in))` inches. 

## Problem 2 

```{r}
pols_df = read_csv("pols-month.csv") %>% 
  janitor::clean_names() %>% 
  separate(mon, into = c("year", "month", "day")) %>% 
  mutate(month = month.name[as.numeric(month)], year = as.numeric(year), president = ifelse(prez_gop, "gop", "dem")) %>% 
  select (-prez_dem, -prez_gop, -day)

snp_df = read_csv("snp.csv") %>% 
  janitor::clean_names() %>% 
  mutate(date = as.Date(date,"%m/%d/%y ")) %>% 
  separate(date, into = c("year", "month", "day")) %>% 
  mutate(month = month.name[as.numeric(month)], day = as.numeric(day), year = as.numeric(year)) %>% 
  select(year, month, everything(), -day) %>% 
  rename(snp_close_value = close)

unemployment_df = read_csv("unemployment.csv") %>% 
  pivot_longer(Jan:Dec, names_to = "month") %>% 
  mutate(month = match(month, month.abb), month = month.name[month]) %>% 
  janitor::clean_names() %>% 
  rename(percent_unemployed = value)

fte_df = left_join(pols_df, snp_df, by = c("year", "month")) %>% 
  left_join(unemployment_df, by = c("year", "month"))

```

## Confirm that I can delete day in snp data set 
## Confirm that I can not round 

The `prez_df` dataset provides information on the number of Republican and Democratic government officials during each month beginning in 1947, including senators (`sen_gop` and `sen_dem`), representatives (`rep_gop` and `rep_dem`), and governors (`gov_gop` and `gov_dem`), as well as the party of the `president`. It has `r ncol(pols_df)`variables and `r nrow(pols_df)` observations. 

The `snp_df` dataset provides the closing value of the S&P stock index on a given date of each month in a given year. It has `r ncol(snp_df)` variables and `r nrow(snp_df)` observations. 

The `unemployment_df` dataset provides information on the percentage of unemployment in a given `month` of a given `year`. It has `r ncol(unemployment_df)` variables and `r nrow(unemployment_df)` observations.

Finally, the compiled dataset, `fte_df` combines this information by month and year to provide the unemployment percentage, S&P closing value, and political representation information on a monthly basis from ` r min(pull(fte_df, year))` to `r max(pull(fte_df, year))`, although some information is missing especially in earlier years. The dataset has `r nrow(fte_df)` observations and `r ncol(fte_df)` variables, including  all `president`, `percent_unemployed`, and `snp_close_value`. 


